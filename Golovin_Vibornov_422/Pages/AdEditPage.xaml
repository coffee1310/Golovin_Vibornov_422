<Page x:Class="Golovin_Vibornov_422.Pages.AdEditPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Редактирование объявления">
    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#0078D4" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" Content="← Назад" Click="BackButton_Click" 
                        Background="Transparent" Foreground="White" 
                        BorderBrush="White" BorderThickness="1"
                        Padding="10,5" Cursor="Hand"/>

                <TextBlock Grid.Column="1" x:Name="lblTitle" 
                          FontSize="18" FontWeight="Bold" Foreground="White"
                          HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="25">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="Изображение:" 
                          Margin="0,0,15,10" VerticalAlignment="Top" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <Border Grid.Row="0" Grid.Column="1" 
                       Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="1"
                       Padding="15" Margin="0,0,0,15" CornerRadius="4">
                    <StackPanel Orientation="Vertical">
                        <Border BorderBrush="#CED4DA" BorderThickness="1" 
                               Background="White" CornerRadius="4"
                               HorizontalAlignment="Left" Margin="0,0,0,10">
                            <Image x:Name="imgPreview" Width="200" Height="150" 
                                  Stretch="Uniform"
                                  Source="/Images/no-image.jpg">
                                <Image.Style>
                                    <Style TargetType="Image">
                                        <Setter Property="Source" Value="/Images/no-image.jpg"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding ElementName=imgPreview, Path=Source}" Value="{x:Null}">
                                                <Setter Property="Source" Value="/Images/no-image.jpg"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Style>
                            </Image>
                        </Border>

                        <StackPanel Orientation="Horizontal">
                            <Button Content="📁 Выбрать фото" Click="SelectImageButton_Click"
                                    Background="#0078D4" Foreground="White" BorderThickness="0"
                                    Padding="12,6" FontSize="12" FontWeight="SemiBold" Cursor="Hand"
                                    ToolTip="Выбрать изображение для объявления"/>
                            <Button Content="🗑️ Удалить" Click="RemoveImageButton_Click"
                                    Background="#6C757D" Foreground="White" BorderThickness="0"
                                    Padding="12,6" FontSize="12" FontWeight="SemiBold" Cursor="Hand"
                                    Margin="10,0,0,0"
                                    ToolTip="Удалить текущее изображение"/>
                        </StackPanel>

                        <TextBlock x:Name="lblImageInfo" FontSize="11" Foreground="#6C757D" 
                                  Margin="0,5,0,0" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="Заголовок:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <TextBox Grid.Row="1" Grid.Column="1" x:Name="txtTitle" Height="35" 
                        FontSize="14" Padding="8" Margin="0,0,0,15"
                        BorderBrush="#CCCCCC" BorderThickness="1"
                        ToolTip="Введите заголовок объявления (обязательное поле)"/>
                <TextBlock Grid.Row="1" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center" 
                          ToolTip="Обязательное поле"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="Описание:" 
                          Margin="0,0,15,10" VerticalAlignment="Top" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <TextBox Grid.Row="2" Grid.Column="1" x:Name="txtDescription" Height="100" 
                        TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                        FontSize="14" Padding="8" Margin="0,0,0,15"
                        BorderBrush="#CCCCCC" BorderThickness="1"
                        ToolTip="Введите подробное описание объявления"/>

                <TextBlock Grid.Row="3" Grid.Column="0" Text="Дата публикации:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <DatePicker Grid.Row="3" Grid.Column="1" x:Name="dpDate" Height="35" 
                           FontSize="14" Margin="0,0,0,15"
                           BorderBrush="#CCCCCC" BorderThickness="1"
                           ToolTip="Выберите дату публикации объявления"/>
                <TextBlock Grid.Row="3" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center"
                          ToolTip="Обязательное поле"/>

                <TextBlock Grid.Row="4" Grid.Column="0" Text="Город:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <ComboBox Grid.Row="4" Grid.Column="1" x:Name="cmbCity" Height="35" 
                         FontSize="14" Margin="0,0,0,15" 
                         DisplayMemberPath="city1"
                         BorderBrush="#CCCCCC" BorderThickness="1"
                         ToolTip="Выберите город из списка"/>
                <TextBlock Grid.Row="4" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center"
                          ToolTip="Обязательное поле"/>

                <TextBlock Grid.Row="5" Grid.Column="0" Text="Категория:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <ComboBox Grid.Row="5" Grid.Column="1" x:Name="cmbCategory" Height="35" 
                         FontSize="14" Margin="0,0,0,15" 
                         DisplayMemberPath="name"
                         BorderBrush="#CCCCCC" BorderThickness="1"
                         ToolTip="Выберите категорию объявления"/>
                <TextBlock Grid.Row="5" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center"
                          ToolTip="Обязательное поле"/>

                <TextBlock Grid.Row="6" Grid.Column="0" Text="Тип:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <ComboBox Grid.Row="6" Grid.Column="1" x:Name="cmbType" Height="35" 
                         FontSize="14" Margin="0,0,0,15" 
                         DisplayMemberPath="type1"
                         BorderBrush="#CCCCCC" BorderThickness="1"
                         ToolTip="Выберите тип объявления"/>
                <TextBlock Grid.Row="6" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center"
                          ToolTip="Обязательное поле"/>

                <TextBlock Grid.Row="7" Grid.Column="0" Text="Статус:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <ComboBox Grid.Row="7" Grid.Column="1" x:Name="cmbStatus" Height="35" 
                         FontSize="14" Margin="0,0,0,15" 
                         DisplayMemberPath="status1"
                         BorderBrush="#CCCCCC" BorderThickness="1"
                         SelectionChanged="cmbStatus_SelectionChanged"
                         ToolTip="Выберите статус объявления"/>
                <TextBlock Grid.Row="7" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center"
                          ToolTip="Обязательное поле"/>

                <TextBlock Grid.Row="8" Grid.Column="0" Text="Цена:" 
                          Margin="0,0,15,10" VerticalAlignment="Center" 
                          FontWeight="SemiBold" Foreground="#333333"/>
                <TextBox Grid.Row="8" Grid.Column="1" x:Name="txtPrice" Height="35" 
                        FontSize="14" Padding="8" Margin="0,0,0,15"
                        BorderBrush="#CCCCCC" BorderThickness="1"
                        ToolTip="Введите цену в формате 0.00 (только цифры и точка)"
                        PreviewTextInput="txtPrice_PreviewTextInput"/>
                <TextBlock Grid.Row="8" Grid.Column="2" Text="*" Foreground="Red" 
                          FontWeight="Bold" VerticalAlignment="Center"
                          ToolTip="Обязательное поле"/>

                <Border x:Name="profitPanel" Grid.Row="9" Grid.Column="1" 
                       Background="#F0F8F0" BorderBrush="#C0E0C0" BorderThickness="1"
                       Padding="15" Margin="0,0,0,15" CornerRadius="4" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="💰 Ввод полученной суммы" FontWeight="SemiBold" 
                                  Margin="0,0,0,8" Foreground="#2D5C2D"/>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="Полученная сумма:" FontSize="12" 
                                      VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBox x:Name="txtProfit" Width="120" Height="25" 
                                    FontSize="12" Padding="5"
                                    BorderBrush="#90C090" BorderThickness="1"
                                    ToolTip="Введите целое неотрицательное число"
                                    PreviewTextInput="txtProfit_PreviewTextInput"/>
                            <TextBlock Text="руб." FontSize="12" Margin="10,0,0,0" 
                                      VerticalAlignment="Center" Foreground="#666666"/>
                        </StackPanel>
                        <TextBlock Text="Эта сумма будет добавлена в вашу общую прибыль" 
                                  FontSize="10" Foreground="#666666" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <Border x:Name="errorBorder" Grid.Row="10" Grid.ColumnSpan="3" 
                       Background="#FEF7F7" BorderBrush="#F4C7C3" BorderThickness="1" 
                       Padding="15" CornerRadius="4" Visibility="Collapsed">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⚠" FontSize="14" Margin="0,0,10,0" 
                                  Foreground="#D83B01"/>
                        <TextBlock x:Name="lblError" Foreground="#D83B01" FontSize="12" 
                                  TextWrapping="Wrap" TextAlignment="Left"/>
                    </StackPanel>
                </Border>
            </Grid>
        </ScrollViewer>

        <Border Grid.Row="2" Background="#F5F5F5" Padding="20" 
               BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button x:Name="btnSave" Content="💾 Сохранить" Click="SaveButton_Click" 
                        Background="#0078D4" Foreground="White" BorderThickness="0"
                        Padding="20,10" FontSize="14" FontWeight="SemiBold"
                        Cursor="Hand" Margin="0,0,10,0"/>
                <Button Content="❌ Отмена" Click="CancelButton_Click" 
                        Background="#6B6B6B" Foreground="White" BorderThickness="0"
                        Padding="20,10" FontSize="14" FontWeight="SemiBold"
                        Cursor="Hand" Margin="10,0,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>